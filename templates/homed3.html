{% extends "layout.html" %}
{% block content%}


<main class="mt-0 mb-0">

  <section class="main-section-1" style="height: 92vh; width: 95 vw;">
    <div class="pt-4">
      <h1 style="font-size:5vw" class="text-center text-light fw-bolder">LIBS ANALYZER</h1>
    </div>

    <div class="mt-3">
      <div class="d-flex  justify-content-evenly flex-row bd-highlight mb-3">

        <div class="p-2 bd-highlight"><img width="300vw" height="300vw"
            src="{{ url_for('static', filename='/media/Group11.jpg') }}" alt=""></div>
        <!-- <h1> -->

        <div class="my-auto p-2 bd-highlight b"><a class="btn btn-lg btn-green fw-bold" href="#section-2">GET
            STARTED</a></div>
        <!-- </h1> -->
        <div class="p-2 bd-highlight" id="my_p1"><img width="300vw" height="300vw"
            src="{{ url_for('static', filename='/media/Group12.jpg') }}" alt=""></div>
      </div>
    </div>
  </section>

  <!-- <span class="anchor" id="section-2"></span> -->

  <section class="section-2" style="height: 92vh; width: 95 vw;">
    <div class="d-flex flex-column s2">
      <div class="p-0">
        <form method=post enctype=multipart/form-data hidden>
          <input type=file name=file id='file' onchange="drawChart()">

          <!-- <input type=file name='Input Spectral Data' class="btn btn-lg section-2-btn" style="color: #000000 ;"> -->
        </form>
        <button id="file_input" onclick="clickHandler()" class="btn btn-lg section-2-btn" style="color: #000000 ;">Input
          Spectral Data</button>
      </div>
      <div class="p-0">
        <div class="graphc">
          <div id="graphContainer"></div>
        </div>
      </div>
      <div class="p-0">
        <button class="btn btn-lg section-2-btn-next" style="color: #000000 ;">NEXT</button>
      </div>

    </div>
  </section>

  <span class="anchor" id="section-3"></span>
  <section class="container">
    <h2>Element Selector</h2>
  </section>

  <section>
    <div id="container"></div>
  </section>
</main>

{% endblock content%}

{% block JScript%}
<script>

  function clickHandler() {
    document.getElementById('file').click()
  }
  let element = document.getElementById('file_input')
</script>

<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<script type="module">
  function plotGraph() {
    const fileInput = document.getElementById('file');
    const file = fileInput.files[0];

    if (file) {
      const reader = new FileReader();
      reader.onload = function (event) {
        const content = event.target.result;
        const lines = content.split('\n');
        const data = [];
        headings = lines[0];
        console.log(headings);

        for (let i = 1; i < lines.length; i++) {  // Start from index 1 to skip header
          const line = lines[i];
          const value = parseFloat(line.trim());
          if (!isNaN(value)) {
            data.push(value);
          }
        }
        // drawChart(data);
        const x = d3.parse(data);
        console.log(x);
      };
      reader.readAsText(file);
    }
  }


function drawChart(){
    const fileInput = document.getElementById('file');
    const file = fileInput.files[0];

  // Declare the chart dimensions and margins.
  const width = 640;
  const height = 400;
  const marginTop = 20;
  const marginRight = 20;
  const marginBottom = 30;
  const marginLeft = 40;

  // Declare the x (horizontal position) scale.
  const x = d3.csvParse(file)
  console.log(x)
  // Declare the y (vertical position) scale.
  // const y = d3.scaleLinear()
  //   .domain([0, 100])
  //   .range([height - marginBottom, marginTop]);

  // // Create the SVG container.
  // const svg = d3.create("svg")
  //   .attr("width", width)
  //   .attr("height", height);

  // // Add the x-axis.
  // svg.append("g")
  //   .attr("transform", `translate(0,${height - marginBottom})`)
  //   .call(d3.axisBottom(x));

  // // Add the y-axis.
  // svg.append("g")
  //   .attr("transform", `translate(${marginLeft},0)`)
  //   .call(d3.axisLeft(y));

  // // Append the SVG element.
  // container.append(svg.node());
}

</script>
{% endblock JScript%}